# Shannon 快速开始指南

欢迎使用 Shannon！这是一个企业级 AI 代理编排器，支持多模型路由和自定义 API 端点。

## 🚀 快速开始

### 1. 环境要求

- Docker 和 Docker Compose
- Git
- 至少 4GB 可用内存

### 2. 克隆项目

```bash
git clone https://github.com/Kocoro-lab/Shannon.git
cd Shannon
```

### 3. 配置环境变量

复制环境变量模板：

```bash
cp .env.example .env
```

编辑 `.env` 文件，添加你的 API 密钥：

```bash
# OpenAI
OPENAI_API_KEY=your_openai_api_key_here

# Anthropic
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Google
GOOGLE_API_KEY=your_google_api_key_here

# DeepSeek
DEEPSEEK_API_KEY=your_deepseek_api_key_here
```

### 4. 启动服务

```bash
# 构建并启动所有服务
docker compose -f deploy/compose/docker-compose.yml up -d --build

# 查看服务状态
docker compose -f deploy/compose/docker-compose.yml ps
```

### 5. 验证安装

等待所有服务启动完成（约 2-3 分钟），然后访问：

- **API 文档**：http://localhost:8000/docs
- **健康检查**：http://localhost:8000/health

## 🔧 配置说明

### 模型配置

Shannon 使用 `config/models.yaml` 文件来配置模型路由和定价：

```yaml
model_tiers:
  small:
    providers:
      - provider: openai
        model: gpt-4.1-nano
        priority: 1
  medium:
    providers:
      - provider: openai
        model: gpt-4.1-mini
        priority: 1
  large:
    providers:
      - provider: openai
        model: gpt-4.1
        priority: 1
```

### 自定义 API 端点

如果你有私有部署的 LLM 服务，可以在 `config/models.yaml` 中添加：

```yaml
provider_settings:
  custom_provider:
    base_url: "https://your-custom-api.com/v1"
    api_key_env: "CUSTOM_API_KEY"
    timeout: 30
```

然后在 `.env` 文件中添加：

```bash
CUSTOM_API_KEY=your_custom_api_key_here
```

## 📖 使用示例

### 基本 API 调用

```bash
curl -X POST "http://localhost:8000/v1/chat/completions" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "gpt-4.1-mini",
    "messages": [
      {"role": "user", "content": "你好，Shannon！"}
    ]
  }'
```

### Python 客户端

```python
import requests

response = requests.post(
    "http://localhost:8000/v1/chat/completions",
    json={
        "model": "gpt-4.1-mini",
        "messages": [
            {"role": "user", "content": "请帮我写一个 Python 函数来计算斐波那契数列"}
        ]
    }
)

print(response.json())
```

## 🛠️ 故障排除

### 常见问题

**Q: 服务启动失败怎么办？**
A: 检查 Docker 是否正在运行，确保端口 8000 没有被占用。

**Q: API 调用返回 401 错误？**
A: 检查 `.env` 文件中的 API 密钥是否正确设置。

**Q: 如何查看日志？**
A: 使用 `docker compose logs -f` 查看实时日志。

**Q: 如何停止服务？**
A: 运行 `docker compose -f deploy/compose/docker-compose.yml down`

### 日志查看

```bash
# 查看所有服务日志
docker compose -f deploy/compose/docker-compose.yml logs

# 查看特定服务日志
docker compose -f deploy/compose/docker-compose.yml logs llm-service

# 实时查看日志
docker compose -f deploy/compose/docker-compose.yml logs -f
```

## 🔄 更新和维护

### 更新到最新版本

```bash
git pull origin main
docker compose -f deploy/compose/docker-compose.yml up -d --build
```

### 清理 Docker 资源

```bash
# 清理未使用的镜像
docker image prune -f

# 清理所有未使用的资源
docker system prune -f
```

## 📚 更多资源

- [完整文档](https://github.com/Kocoro-lab/Shannon/blob/main/README.md)
- [API 参考](http://localhost:8000/docs)
- [问题反馈](https://github.com/Kocoro-lab/Shannon/issues)
- [贡献指南](https://github.com/Kocoro-lab/Shannon/blob/main/CONTRIBUTING.md)

## 🤝 贡献

我们欢迎各种形式的贡献！请查看 [贡献指南](https://github.com/Kocoro-lab/Shannon/blob/main/CONTRIBUTING.md) 了解如何参与。

---

*需要帮助？请创建 [Issue](https://github.com/Kocoro-lab/Shannon/issues) 或联系维护者。*