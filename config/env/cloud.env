# ============================================================================
# Shannon Cloud Mode Configuration
# ============================================================================
# For multi-tenant cloud deployment with full infrastructure.
# Requires: PostgreSQL, Redis, Temporal, and the Go Orchestrator.
#
# Usage:
#   docker compose -f deploy/compose/docker-compose.yml --profile cloud up
#
# Or deploy to Kubernetes with the appropriate manifests.
# ============================================================================

# -----------------------------------------------------------------------------
# DEPLOYMENT MODE
# -----------------------------------------------------------------------------
# Mode: cloud = Multi-tenant production deployment
SHANNON_MODE=cloud

# Workflow Engine: temporal = Distributed workflow coordination
WORKFLOW_ENGINE=temporal

# Database: postgresql = Production-grade relational database
DATABASE_DRIVER=postgresql

# -----------------------------------------------------------------------------
# INFRASTRUCTURE
# -----------------------------------------------------------------------------
# Temporal workflow engine
TEMPORAL_ENDPOINT=temporal:7233
TEMPORAL_NAMESPACE=shannon
TEMPORAL_TASK_QUEUE=research-tasks

# PostgreSQL database
DATABASE_URL=postgres://shannon:shannon@postgres:5432/shannon
DATABASE_MAX_CONNECTIONS=20

# Redis for sessions, rate limiting, and caching
REDIS_URL=redis://redis:6379

# Orchestrator gRPC endpoint
ORCHESTRATOR_GRPC=http://orchestrator:50052

# -----------------------------------------------------------------------------
# SERVER SETTINGS
# -----------------------------------------------------------------------------
# Bind to all interfaces for container networking
SHANNON_HOST=0.0.0.0

# Port for the API server
SHANNON_PORT=8080

# Admin/metrics port
SHANNON_ADMIN_PORT=8081

# Request timeout in seconds
SHANNON_TIMEOUT_SECS=300

# -----------------------------------------------------------------------------
# SECURITY
# -----------------------------------------------------------------------------
# JWT secret for token signing (generate a strong random value!)
# openssl rand -base64 32
JWT_SECRET=

# API rate limiting
SHANNON_RATE_LIMIT_PER_MINUTE=60
SHANNON_RATE_LIMIT_BURST=10

# -----------------------------------------------------------------------------
# LLM PROVIDER API KEYS
# -----------------------------------------------------------------------------
# Configure at least one provider

# Anthropic Claude
ANTHROPIC_API_KEY=

# OpenAI GPT
OPENAI_API_KEY=

# Google Gemini
# GOOGLE_API_KEY=

# Groq
# GROQ_API_KEY=

# xAI Grok
# XAI_API_KEY=

# -----------------------------------------------------------------------------
# SYNC (DISABLED FOR CLOUD-ONLY)
# -----------------------------------------------------------------------------
# Cloud mode is centralized; P2P sync is not used
SYNC_MODE=disabled

# -----------------------------------------------------------------------------
# OBSERVABILITY
# -----------------------------------------------------------------------------
RUST_LOG=info

# OpenTelemetry exporter
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4317
OTEL_SERVICE_NAME=shannon-api

# -----------------------------------------------------------------------------
# PLAYWRIGHT SERVICE (for web browsing)
# -----------------------------------------------------------------------------
PLAYWRIGHT_URL=http://playwright-service:3000
